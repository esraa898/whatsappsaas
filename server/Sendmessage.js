const _0x5c8e75 = _0x8e06; (function (_0x16130f, _0xf1804c) { const _0x1fb296 = _0x8e06, _0x27b8cb = _0x16130f(); while (!![]) { try { const _0x47f751 = parseInt(_0x1fb296(0x183)) / 0x1 * (parseInt(_0x1fb296(0x1b3)) / 0x2) + parseInt(_0x1fb296(0x17b)) / 0x3 * (-parseInt(_0x1fb296(0x1a2)) / 0x4) + -parseInt(_0x1fb296(0x189)) / 0x5 + -parseInt(_0x1fb296(0x198)) / 0x6 * (-parseInt(_0x1fb296(0x182)) / 0x7) + -parseInt(_0x1fb296(0x190)) / 0x8 * (-parseInt(_0x1fb296(0x17f)) / 0x9) + parseInt(_0x1fb296(0x18d)) / 0xa * (parseInt(_0x1fb296(0x187)) / 0xb) + -parseInt(_0x1fb296(0x1b5)) / 0xc * (parseInt(_0x1fb296(0x16d)) / 0xd); if (_0x47f751 === _0xf1804c) break; else _0x27b8cb['push'](_0x27b8cb['shift']()); } catch (_0x51abd5) { _0x27b8cb['push'](_0x27b8cb['shift']()); } } }(_0x5d73, 0xbaa97)); const { validationResult } = require('express-validator'), moment = require(_0x5c8e75(0x17d)), { startCon } = require(_0x5c8e75(0x1a0)), fs = require('fs'), { formatSendBlast, getFileTypeFromUrl, formatReceipt } = require(_0x5c8e75(0x175)), { dbQuery } = require(_0x5c8e75(0x1b2)), { Socket } = require('socket.io'), validationSend = async _0x4dda05 => { const _0x2dc792 = _0x5c8e75, _0x5b5132 = validationResult(_0x4dda05); if (!_0x5b5132[_0x2dc792(0x197)]()) return { 'status': ![], 'msg': _0x5b5132[_0x2dc792(0x184)]()[0x0][_0x2dc792(0x170)] }; try { const _0x25a205 = await fs[_0x2dc792(0x1a7)]('./sessions/session-' + _0x4dda05['body'][_0x2dc792(0x1a8)] + _0x2dc792(0x1ae)); } catch (_0x4245f2) { return { 'status': ![], 'msg': _0x2dc792(0x1b4) }; } const { conn: _0x28a3a9, state: _0xa7f0d2 } = await startCon(_0x4dda05[_0x2dc792(0x196)]['sender']); return { 'status': !![], 'data': { 'conn': _0x28a3a9, 'state': _0xa7f0d2 } }; }, sendMessage = async (_0x342134, _0x3882a9) => { const _0xc56052 = _0x5c8e75, _0x27311e = await validationSend(_0x342134), _0x3d58d5 = formatReceipt(_0x342134['body'][_0xc56052(0x17c)]); if (_0x27311e[_0xc56052(0x19c)] === ![]) return _0x3882a9[_0xc56052(0x19c)](0x19a)['json']({ 'status': ![], 'msg': _0x27311e[_0xc56052(0x170)] }); const { conn: _0x30d4e2, state: _0x583885 } = _0x27311e[_0xc56052(0x19a)], _0x2b4cd1 = _0x342134[_0xc56052(0x196)][_0xc56052(0x1ac)], _0x376fa9 = await getMessage(_0x2b4cd1, _0x342134[_0xc56052(0x196)]); console[_0xc56052(0x18c)](_0x376fa9), _0x30d4e2['ev']['on']('connection.update', async _0x5cebf8 => { const _0x24aa41 = _0xc56052; if (_0x5cebf8['connection'] === 'open') { let _0x3e1fe4; _0x3d58d5['endsWith'](_0x24aa41(0x179)) ? _0x3e1fe4 = [_0x24aa41(0x16e)] : _0x3e1fe4 = await _0x30d4e2[_0x24aa41(0x17e)](_0x3d58d5); if (_0x3e1fe4[_0x24aa41(0x191)] === 0x0) return _0x3882a9[_0x24aa41(0x19c)](0x19a)['json']({ 'status': ![], 'msg': _0x24aa41(0x18e) }); await _0x30d4e2['sendMessage'](_0x3d58d5, _0x376fa9)[_0x24aa41(0x180)](() => { const _0x4e2dc4 = _0x24aa41; _0x3882a9[_0x4e2dc4(0x19c)](0xc8)['json']({ 'status': !![], 'msg': 'Message\x20Sent!' }); })[_0x24aa41(0x172)](_0x5a5e98 => { const _0x45acab = _0x24aa41; _0x3882a9[_0x45acab(0x19c)](0x19a)[_0x45acab(0x1b1)]({ 'status': ![], 'msg': _0x5a5e98[_0x45acab(0x173)] }); }); } }); }; async function asyncForEach(_0x1d9847, _0x25fa37) { const _0xdeb01c = _0x5c8e75; for (let _0x1131a2 = 0x0; _0x1131a2 < _0x1d9847[_0xdeb01c(0x191)]; _0x1131a2++) { await _0x25fa37(_0x1d9847[_0x1131a2], _0x1131a2, _0x1d9847); } } const blastMessage = async (_0x47c60d, _0x363a35) => { const _0xf361d7 = _0x5c8e75, _0x517e1e = await dbQuery('SELECT\x20user_id\x20FROM\x20numbers\x20WHERE\x20body\x20=\x20\x27' + _0x47c60d[_0xf361d7(0x196)][_0xf361d7(0x1a8)] + '\x27'), _0x4bea10 = _0x517e1e[0x0][_0xf361d7(0x1b6)], _0x22fa2d = await formatSendBlast(_0x47c60d['body'][_0xf361d7(0x1ac)], _0x47c60d[_0xf361d7(0x196)][_0xf361d7(0x19a)]); function _0x416d50(_0x446c64) { return console['log'](_0x446c64), new Promise(_0x5b289a => { setTimeout(() => { _0x5b289a(''); }, _0x446c64); }); } return asyncForEach(_0x22fa2d, async ({ number: _0x171f0b, msg: _0x278c73 }) => { const _0x5e05cf = _0xf361d7, _0x43015e = await validationSend(_0x47c60d); if (_0x43015e[_0x5e05cf(0x19c)] === ![]) return _0x363a35[_0x5e05cf(0x19c)](0x19a)['json']({ 'status': ![], 'msg': _0x43015e[_0x5e05cf(0x170)] }); const { conn: _0x5b987c, state: _0x206400 } = _0x43015e[_0x5e05cf(0x19a)]; if (_0x206400[_0x5e05cf(0x171)]['me'] === undefined) return _0x363a35[_0x5e05cf(0x19c)](0x19a)[_0x5e05cf(0x1b1)]({ 'status': ![], 'msg': _0x5e05cf(0x185) }); _0x5b987c['ev']['on']('connection.update', async _0x5dca0b => { const _0xa932d4 = _0x5e05cf; if (_0x5dca0b[_0xa932d4(0x18f)] === _0xa932d4(0x1b0)) { let _0x7ac769 = 'failed'; const _0x3863dc = formatReceipt(_0x171f0b); let _0x413802; _0x3863dc[_0xa932d4(0x188)](_0xa932d4(0x179)) ? _0x413802 = [_0xa932d4(0x16e)] : _0x413802 = await _0x5b987c['onWhatsApp'](_0x3863dc); _0x413802[_0xa932d4(0x191)] === 0x0 ? _0x7ac769 = _0xa932d4(0x181) : (console['log'](_0x278c73), await _0x5b987c[_0xa932d4(0x1a6)](_0x3863dc, _0x278c73)['then'](() => { const _0x54c0ba = _0xa932d4; _0x7ac769 = _0x54c0ba(0x1aa); })['catch'](_0x238f07 => { const _0x31a878 = _0xa932d4; console[_0x31a878(0x18c)](_0x238f07), _0x7ac769 = _0x31a878(0x181); })); const _0x238cc2 = _0x47c60d['body'][_0xa932d4(0x1ac)] === _0xa932d4(0x1a4) ? _0x278c73[_0xa932d4(0x195)] : _0x278c73[_0xa932d4(0x1a1)], _0x260f0e = _0xa932d4(0x176) + _0x4bea10 + _0xa932d4(0x193) + _0x171f0b + _0xa932d4(0x193) + _0x238cc2 + _0xa932d4(0x193) + _0x47c60d[_0xa932d4(0x196)][_0xa932d4(0x1ac)] + _0xa932d4(0x193) + _0x7ac769 + _0xa932d4(0x193) + moment(new Date())['format']('YYYY-MM-DD\x20HH:mm:ss') + '\x22)'; await dbQuery(_0x260f0e); } }), await _0x416d50(_0x47c60d['body']['delay'] * 0x3e8); }), _0x363a35[_0xf361d7(0x19c)](0xc8)['json']({ 'status': !![], 'msg': _0xf361d7(0x194) }); }; async function getMessage(_0x48e3f9, _0x7c64eb) { const _0x42ca56 = _0x5c8e75; try { let _0x1ed8b8; switch (_0x48e3f9) { case 'text': _0x1ed8b8 = { 'text': _0x7c64eb[_0x42ca56(0x173)] }; break; case 'image': _0x1ed8b8 = { 'image': { 'url': _0x7c64eb[_0x42ca56(0x18a)] }, 'caption': _0x7c64eb[_0x42ca56(0x173)] }; break; case _0x42ca56(0x18b): const { explode: _0xe221d7, fileType: _0x35323b } = getFileTypeFromUrl(_0x7c64eb['url']); _0x1ed8b8 = { 'document': { 'url': _0x7c64eb[_0x42ca56(0x18a)] }, 'fileName': _0xe221d7, 'mimetype': _0x42ca56(0x19f) + _0x35323b }; break; case _0x42ca56(0x192): const _0x6650cf = [{ 'buttonId': 'Id1', 'buttonText': { 'displayText': _0x7c64eb[_0x42ca56(0x1a9)] }, 'type': 0x1 }, { 'buttonId': 'Id2', 'buttonText': { 'displayText': _0x7c64eb[_0x42ca56(0x16f)] }, 'type': 0x1 }]; _0x1ed8b8 = { 'text': _0x7c64eb['message'], 'footer': _0x7c64eb[_0x42ca56(0x1a3)], 'buttons': _0x6650cf, 'headerType': 0x1 }; break; case _0x42ca56(0x1a5): const _0x39b335 = _0x7c64eb[_0x42ca56(0x199)][_0x42ca56(0x177)]('|'), _0x1c6557 = _0x7c64eb[_0x42ca56(0x174)][_0x42ca56(0x177)]('|'), _0x3f08aa = _0x39b335[0x0] === 'call' ? 'phoneNumber' : 'url', _0x26fe25 = _0x1c6557[0x0] === _0x42ca56(0x178) ? _0x42ca56(0x19d) : _0x42ca56(0x18a), _0x4c8d00 = _0x39b335[0x0] + _0x42ca56(0x1ab), _0x290f70 = _0x1c6557[0x0] + 'Button', _0xc6ea2c = [{ 'index': 0x1, [_0x4c8d00]: { [_0x3f08aa]: _0x39b335[0x2], 'displayText': _0x39b335[0x1] } }, { 'index': 0x2, [_0x290f70]: { [_0x26fe25]: _0x1c6557[0x2], 'displayText': _0x1c6557[0x1] } }], _0x166b76 = { 'text': _0x7c64eb['message'], 'footer': _0x7c64eb['footer'], 'templateButtons': _0xc6ea2c }; _0x1ed8b8 = _0x166b76; break; default: break; }return _0x1ed8b8; } catch (_0x79a403) { console[_0x42ca56(0x18c)](_0x79a403); } } function _0x8e06(_0x26c957, _0x3944db) { const _0x5d7353 = _0x5d73(); return _0x8e06 = function (_0x8e06f4, _0x1c0e73) { _0x8e06f4 = _0x8e06f4 - 0x16d; let _0x264a2c = _0x5d7353[_0x8e06f4]; return _0x264a2c; }, _0x8e06(_0x26c957, _0x3944db); } const getGroup = async (_0x5640b2, _0x236a28) => { const _0x18ff1d = _0x5c8e75, _0x557fc2 = await validationSend(_0x5640b2); if (_0x557fc2[_0x18ff1d(0x19c)] === ![]) return _0x236a28[_0x18ff1d(0x19c)](0x19a)[_0x18ff1d(0x1b1)]({ 'status': ![], 'msg': _0x557fc2[_0x18ff1d(0x170)] }); const { conn: _0x2bb4a8, state: _0x83c43f } = _0x557fc2[_0x18ff1d(0x19a)], _0x2ad1b9 = _0x5640b2[_0x18ff1d(0x196)]['type'], _0x4923eb = await getMessage(_0x2ad1b9, _0x5640b2['body']); console[_0x18ff1d(0x18c)](_0x4923eb), _0x2bb4a8['ev']['on'](_0x18ff1d(0x1af), async _0x382326 => { const _0x208681 = _0x18ff1d; if (_0x382326[_0x208681(0x18f)] === 'open') { let _0x1c2fcd = await _0x2bb4a8['groupFetchAllParticipating'](), _0x96ed43 = Object[_0x208681(0x19e)](_0x1c2fcd)[_0x208681(0x19b)](0x0)[_0x208681(0x1ad)](_0x5e40bf => _0x5e40bf[0x1]); return _0x236a28[_0x208681(0x19c)](0xc8)[_0x208681(0x1b1)]({ 'status': !![], 'groups': _0x96ed43 }); } }); }, InitialDevice = async (_0x1868ee, _0x11053b) => { const _0x1281a9 = _0x5c8e75, _0x150abd = await validationSend(_0x1868ee); if (_0x150abd[_0x1281a9(0x19c)] === ![]) return _0x11053b[_0x1281a9(0x19c)](0x19a)[_0x1281a9(0x1b1)]({ 'status': ![], 'msg': _0x150abd[_0x1281a9(0x170)] }); const { conn: _0x1af842, state: _0x58dc25 } = _0x150abd[_0x1281a9(0x19a)], _0xb2e2a8 = _0x1868ee['body'][_0x1281a9(0x1ac)]; _0x1af842['ev']['on'](_0x1281a9(0x1af), async _0x170156 => { const _0x333939 = _0x1281a9; if (_0x170156[_0x333939(0x18f)] === 'open') return _0x11053b[_0x333939(0x19c)](0xc8)[_0x333939(0x1b1)]({ 'status': !![], 'update': _0x170156 }); else { if (_0x170156[_0x333939(0x18f)] === _0x333939(0x17a)) return _0x11053b[_0x333939(0x19c)](0x19a)[_0x333939(0x1b1)]({ 'status': ![], 'update': _0x170156 }); } }); }; function _0x5d73() { const _0x80fec0 = ['166QWhBUs', 'The\x20sender\x20is\x20not\x20registered\x20or\x20not\x20scan\x20yet!', '204ysshGP', 'user_id', '75491jlUURD', 'true', 'button2', 'msg', 'creds', 'catch', 'message', 'template2', './Helper', 'INSERT\x20INTO\x20blasts\x20(user_id,receiver,message,type,status,created_at)\x20\x20VALUES\x20(\x22', 'split', 'call', '@g.us', 'close', '3ThKXFS', 'number', 'moment', 'onWhatsApp', '9chMzaf', 'then', 'failed', '77bJEypY', '548THfZgy', 'array', 'Please\x20Connect\x20your\x20whatsapp\x20before\x20use\x20the\x20Api!', 'exports', '2956151JiniWa', 'endsWith', '3766880sWfKgK', 'url', 'document', 'log', '30vdXuBk', 'The\x20Destination\x20Number\x20Is\x20Not\x20Registered\x20On\x20Whatsapp', 'connection', '1116736XnsdOi', 'length', 'button', '\x22,\x22', 'Blasts\x20message\x20on\x20progress!,you\x20can\x20see\x20the\x20results\x20in\x20history\x20Blast\x20page.', 'caption', 'body', 'isEmpty', '758412uEvBQz', 'template1', 'data', 'slice', 'status', 'phoneNumber', 'entries', 'application/', './WaConnection', 'text', '3060236usYiYr', 'footer', 'image', 'template', 'sendMessage', 'readFileSync', 'sender', 'button1', 'success', 'Button', 'type', 'map', '.json', 'connection.update', 'open', 'json', './Querydb']; _0x5d73 = function () { return _0x80fec0; }; return _0x5d73(); } module[_0x5c8e75(0x186)] = { 'sendMessage': sendMessage, 'blastMessage': blastMessage, 'getGroup': getGroup, 'InitialDevice': InitialDevice };